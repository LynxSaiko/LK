# ===================== Setup /etc/fstab untuk live =====================
log_msg "Menyiapkan /etc/fstab untuk live session..."

# Buat fstab minimal di rootfs baru (overlay)
cat > /.root/etc/fstab << EOF
# /etc/fstab - Leakos Live (squashfs + overlay RAM)
# Generated by init script

proc            /proc           proc    nosuid,nodev,noexec 0 0
sysfs           /sys            sysfs   nosuid,nodev,noexec 0 0
devtmpfs        /dev            devtmpfs rw,nosuid         0 0
tmpfs           /run            tmpfs   rw,nosuid,nodev,mode=0755 0 0

# Bind boot media (USB/CD) ke /mnt/container
/mnt            /mnt/container  none    bind,ro           0 0

# Overlay changes (supaya bisa diakses user)
cow/mod         /mnt/changes    none    bind              0 0

# Tmpfs untuk /tmp (optional, kalau belum ada)
tmpfs           /tmp            tmpfs   defaults          0 0

# Kalau ada persistence partition nanti, tambah:
# UUID=xxxx-xxxx  /mnt/persistence ext4  defaults          0 0
EOF

log_msg "/etc/fstab create /.root!"
